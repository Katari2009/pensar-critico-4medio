<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="theme-color" content="#6ECEDA" />
  <meta name="description" content="App educativa: El culto a la ignorancia en la era digital" />
  <title>Pensar Crítico</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
    }
    .glass {
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      border: 1px solid rgba(255, 255, 255, 0.3);
    }
    .glass.dark {
      background: rgba(30, 30, 40, 0.6);
      border: 1px solid rgba(80, 90, 100, 0.3);
    }
    .progress-bar {
      height: 12px;
      border-radius: 999px;
      overflow: hidden;
      background-color: #e9ecef;
    }
    .progress-fill {
      height: 100%;
      transition: width 0.5s ease;
    }
  </style>
</head>
<body class="bg-gray-50 text-gray-800 dark:bg-gray-900 dark:text-white transition-colors duration-300">

  <div id="app">
    <!-- App se carga aquí -->
  </div>

  <script>
    // Estado global
    const state = {
      currentScreen: 'home',
      expandedCard: null,
      progress: { m1: 0, m2: 0, m3: 0, m4: 0, m5: 0 },
      badges: [],
      darkMode: false,
      fontSize: 16
    };

    // Añadir badge
    function addBadge(badge) {
      if (!state.badges.includes(badge)) {
        state.badges.push(badge);
        setTimeout(() => {
          alert(`🏆 ¡Nuevo logro desbloqueado: "${badge}"!`);
        }, 300);
      }
    }

    // Actualizar progreso
    function updateProgress(module, value) {
      state.progress[module] = value;
      const total = Object.values(state.progress).reduce((a, b) => a + b, 0) / 5;
      if (total >= 20 && !state.badges.includes("Primeros pasos")) addBadge("Primeros pasos");
      if (total >= 50 && !state.badges.includes("Pensador crítico")) addBadge("Pensador crítico");
      if (total >= 80 && !state.badges.includes("Ciudadano digital")) addBadge("Ciudadano digital");
    }

    // Tema actual
    function getTheme() {
      return state.darkMode
        ? {
            bg: "bg-gray-900",
            card: "glass dark",
            text: "text-white",
            textSecondary: "text-gray-300",
            accent1: "from-cyan-500/20 to-teal-500/20",
            accent2: "bg-cyan-500",
            input: "bg-gray-700 text-white border-gray-600"
          }
        : {
            bg: "bg-gray-50",
            card: "glass",
            text: "text-gray-800",
            textSecondary: "text-gray-600",
            accent1: "from-sky-100 to-teal-50",
            accent2: "bg-sky-500",
            input: "bg-white text-gray-800 border-gray-300"
          };
    }

    // Renderizar la app
    function render() {
      const theme = getTheme();
      const totalProgress = Object.values(state.progress).reduce((a, b) => a + b, 0) / 5;

      let html = '';

      // Pantalla: HOME
      if (state.currentScreen === 'home') {
        html = `
          <div class="min-h-screen ${theme.bg} transition-colors duration-300">
            <!-- Header -->
            <header class="${theme.card} m-4 mt-6 rounded-2xl p-4 flex justify-between items-center">
              <h1 class="text-xl font-bold ${theme.text}">Pensar Crítico</h1>
              <div class="flex gap-2">
                <button onclick="toggleDarkMode()" class="p-2 rounded-xl bg-gray-200 dark:bg-gray-700">
                  ${state.darkMode ? 
                    '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-yellow-300" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z" /></svg>' :
                    '<svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-700" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z" /></svg>'
                  }
                </button>
                <button onclick="toggleFontSize()" class="p-2 rounded-xl bg-gray-200 dark:bg-gray-700">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 21h10M7 7h10M7 7v10h10V7" />
                  </svg>
                </button>
              </div>
            </header>

            <!-- Hero -->
            <div class="mx-4 mb-6 p-6 rounded-3xl bg-gradient-to-br ${theme.accent1} ${theme.text} shadow-lg">
              <h2 class="text-2xl font-bold mb-3">Reflexiona sobre el culto a la ignorancia</h2>
              <p class="opacity-90 mb-4">
                Una aplicación educativa interactiva para analizar críticamente cómo las plataformas digitales moldean nuestro pensamiento, 
                la información y nuestra identidad en la era del algoritmo.
              </p>
              <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm mt-4">
                <div class="${theme.card} p-3 rounded-xl">
                  <strong>📚 Nivel:</strong> Cuarto Medio
                </div>
                <div class="${theme.card} p-3 rounded-xl">
                  <strong>✍️ Asignatura:</strong> Lengua y Literatura
                </div>
                <div class="${theme.card} p-3 rounded-xl">
                  <strong>🧠 Habilidades:</strong> Pensamiento crítico, Alfabetización mediática, Responsabilidad social
                </div>
              </div>
            </div>

            <!-- Progreso -->
            <div class="mx-4 mb-6">
              <div class="${theme.textSecondary} text-sm mb-2">Progreso general</div>
              <div class="progress-bar">
                <div class="progress-fill bg-gradient-to-r from-cyan-500 to-teal-500" style="width: ${Math.round(totalProgress)}%"></div>
              </div>
              <div class="text-right mt-1">
                <span class="${theme.textSecondary} text-sm">${Math.round(totalProgress)}%</span>
              </div>
            </div>

            <!-- Accesos directos -->
            <div class="p-4 grid grid-cols-2 md:grid-cols-3 gap-4">
              ${[
                { id: "m1", label: "Culto a la ignorancia", icon: "🧠" },
                { id: "m2", label: "Redes y verdad", icon: "🌐" },
                { id: "m3", label: "Influencers", icon: "🎭" },
                { id: "m4", label: "Escribe tu ensayo", icon: "📝" },
                { id: "m5", label: "Ciudadano digital", icon: "🌱" },
                { id: "profile", label: "Tu perfil", icon: "👤" },
              ].map(item => `
                <button onclick="navigate('${item.id}')" class="${theme.card} p-4 rounded-2xl flex flex-col items-center gap-2 transform hover:scale-105 transition-all duration-200">
                  <span class="text-2xl">${item.icon}</span>
                  <span class="text-xs font-medium text-center ${theme.text}">${item.label}</span>
                </button>
              `).join('')}
            </div>

            <!-- Footer -->
            <footer class="text-center text-xs ${theme.textSecondary} mt-12 mb-6 px-4">
              Creado por Christian Núñez Vega, Asesor Pedagógico, Programa PACE-UDA, 2025
            </footer>

            <!-- Bottom Nav Móvil -->
            <div class="fixed bottom-0 left-0 right-0 md:hidden bg-white/90 dark:bg-gray-900/90 backdrop-blur-md border-t border-gray-200 dark:border-gray-800 p-2">
              <div class="flex justify-around">
                <button onclick="navigate('home')" class="p-3 text-cyan-600 dark:text-cyan-400">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                  </svg>
                </button>
                <button onclick="navigate('profile')" class="p-3 text-gray-500 dark:text-gray-400">
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                  </svg>
                </button>
              </div>
            </div>
          </div>
        `;
      }

      // Módulos
      else if (['m1','m2','m3','m4','m5'].includes(state.currentScreen)) {
        const mod = {
          m1: {
            title: "🧠 ¿Qué es el culto a la ignorancia?",
            intro: "Asimov advierte sobre el peligro de celebrar la ignorancia como 'libertad'.",
            content: `Isaac Asimov escribió: "La idea de que todo el mundo tiene derecho a una opinión es absurda. Todo el mundo tiene derecho a tener acceso a información, pero no a una opinión sin fundamento." \n\nHoy, en redes sociales, cualquiera puede decir cualquier cosa y ser escuchado. Pero ¿eso es democracia del conocimiento o culto a la ignorancia?\n\nLa ciencia no es una opinión. Es un método. Y cuando se trata con desprecio, se pone en riesgo el progreso humano.`,
            activity: {
              type: "swipe",
              question: "¿Cuál de estas afirmaciones está basada en evidencia científica?",
              options: [
                { text: "‘La Tierra es plana porque lo vi en un video.’", correct: false },
                { text: "‘Las vacunas salvan millones de vidas cada año.’", correct: true },
                { text: "‘Prefiero creer en mi intuición que en los científicos.’", correct: false },
                { text: "‘La ciencia es solo una opinión más.’", correct: false },
              ]
            },
            nextId: "m2"
          },
          m2: {
            title: "🌐 Redes y consumo de verdad",
            intro: "Byung-Chul Han compara a los influencers con figuras religiosas.",
            content: `Han dice: "El like es el amén. Compartir es la comunión. El consumo es la redención."\n\nLos influencers venden no solo productos, sino identidades. Nos hacen creer que comprando lo que ellos usan, seremos más felices, más libres, más auténticos.\n\nPero esta libertad es falsa. Estamos siendo protocolizados: seguir, dar like, comprar, repetir. Es una liturgia digital.\n\nY en esta ceremonia, la ignorancia se celebra como si fuera sabiduría.`,
            activity: {
              type: "swipe",
              question: "¿Cuál de estas frases refleja mejor la 'eucaristía digital'?",
              options: [
                { text: "‘Compré el producto porque el influencer lo usa.’", correct: true },
                { text: "‘Investigué los ingredientes antes de comprar.’", correct: false },
                { text: "‘No sigo influencers, solo amigos.’", correct: false },
                { text: "‘Me gusta ver videos, pero no compro.’", correct: false },
              ]
            },
            nextId: "m3"
          },
          m3: {
            title: "🎭 Influencers: Nuevos profetas",
            intro: "Los influencers prometen autorrealización a través del consumo.",
            content: `Han advierte: "Nos consumimos hasta la muerte, mientras nos realizamos hasta la muerte."\n\nLa identidad ya no se construye desde dentro, sino desde afuera: a través de lo que compramos, lo que mostramos, lo que compartimos.\n\nEl consumismo se vuelve espiritual. Comprar no es solo necesidad: es ritual, es fe, es pertenencia.\n\nY en este sistema, la crítica es vista como traición. Pensar es desobedecer.`,
            activity: {
              type: "drag",
              question: "Ordena las ideas clave de Asimov y Han.",
              dragItems: [
                "La identidad se convierte en mercancía.",
                "La ciencia no es una opinión, es una metodología.",
                "Nos creemos libres, pero estamos protocolizados.",
                "El 'like' es el amén. Compartir es la comunión.",
              ]
            },
            nextId: "m4"
          },
          m4: {
            title: "📝 Escribe tu ensayo",
            intro: "Ahora es tu turno de reflexionar críticamente.",
            content: `Usa lo aprendido para escribir tu ensayo. Recuerda:\n\n- Introducción: presenta el problema del culto a la ignorancia.\n- Desarrollo: compara Asimov y Han. Usa citas.\n- Conclusión: reflexiona sobre tu rol como ciudadano digital.\n\nEjemplo de cita: "El consumo y la identidad se aúnan. La propia identidad deviene en una mercancía." (Han, 2022)`,
            activity: {
              type: "swipe",
              question: "¿Cuál es el propósito de tu ensayo?",
              options: [
                { text: "Demostrar que la ignorancia es peligrosa.", correct: true },
                { text: "Promover a mis influencers favoritos.", correct: false },
                { text: "Copiar lo que dice internet.", correct: false },
                { text: "Hacer memes sobre la ciencia.", correct: false },
              ]
            },
            nextId: "m5"
          },
          m5: {
            title: "🌱 Mi rol como ciudadano digital",
            intro: "No eres solo un consumidor. Eres un pensador crítico.",
            content: `Puedes elegir:\n\n- Verificar antes de compartir.\n- Cuestionar lo que ves.\n- Buscar fuentes confiables.\n- Usar tu voz para promover el conocimiento.\n\nLa verdadera libertad no es hacer lo que todos hacen. Es pensar por ti mismo.\n\nY en una era de algoritmos, esa es la forma más radical de resistencia.`,
            activity: {
              type: "swipe",
              question: "¿Qué acción tomarás para ser un ciudadano digital responsable?",
              options: [
                { text: "Verificaré antes de compartir noticias.", correct: true },
                { text: "Seguiré a más influencers.", correct: false },
                { text: "Usaré memes para debatir ciencia.", correct: false },
                { text: "No usaré redes sociales nunca más.", correct: false },
              ]
            },
            nextId: "profile"
          }
        }[state.currentScreen];

        let activityHtml = '';
        if (mod.activity.type === 'swipe') {
          activityHtml = `
            <div class="space-y-3">
              ${mod.activity.options.map((opt, i) => `
                <div class="p-4 rounded-xl border-2 border-gray-200 dark:border-gray-700 hover:bg-cyan-50 dark:hover:bg-cyan-900/20 transition-colors">
                  <button onclick="checkAnswer(${opt.correct})" class="w-full text-left ${theme.text}">
                    ${opt.text}
                  </button>
                </div>
              `).join('')}
            </div>
          `;
        } else if (mod.activity.type === 'drag') {
          const items = mod.activity.dragItems;
          activityHtml = `
            <div class="space-y-2" id="drag-container">
              ${items.map((item, i) => `
                <div class="${theme.input} p-3 rounded-xl flex items-center justify-between cursor-grab" draggable="true" ondragstart="dragStart(event, ${i})" ondragover="dragOver(event)" ondrop="dragDrop(event, ${i})">
                  <span>${item}</span>
                  <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-gray-400" viewBox="0 0 20 20" fill="currentColor">
                    <path fill-rule="evenodd" d="M12.586 4.586a2 2 0 112.828 2.828l-3 3a2 2 0 01-2.828 0l-3-3a2 2 0 112.828-2.828L10 7.172l2.586-2.586zm-3 6a2 2 0 11-2.828-2.828l3-3a2 2 0 112.828 2.828l-3 3a2 2 0 010 2.828z" clip-rule="evenodd" />
                  </svg>
                </div>
              `).join('')}
            </div>
            <button onclick="checkOrder()" class="w-full mt-4 py-2 bg-gradient-to-r from-cyan-500 to-teal-500 text-white rounded-xl">
              Verificar orden
            </button>
          `;
        }

        html = `
          <div class="min-h-screen ${theme.bg} transition-colors duration-300 p-4" style="font-size: ${state.fontSize}px">
            <div class="max-w-3xl mx-auto">
              <!-- Header -->
              <div class="${theme.card} m-4 rounded-2xl p-4 flex justify-between items-center">
                <button onclick="navigate('home')" class="px-4 py-2 rounded-xl ${theme.textSecondary} hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors">
                  ← Inicio
                </button>
                <h1 class="text-xl font-bold ${theme.text}">${mod.title}</h1>
                <div class="w-10 h-10 rounded-full ${theme.accent2} flex items-center justify-center text-white">
                  ${mod.title[0]}
                </div>
              </div>

              <!-- Módulos expandibles -->
              <div class="space-y-4 px-4">
                <!-- Introducción -->
                <div class="${theme.card} rounded-2xl overflow-hidden cursor-pointer" onclick="toggleCard('intro')">
                  <div class="p-5 flex justify-between items-center">
                    <h3 class="font-semibold ${theme.text}">📚 Introducción</h3>
                    <svg class="${theme.textSecondary} h-5 w-5 transition-transform duration-300 ${state.expandedCard === 'intro' ? 'rotate-180' : ''}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                  ${state.expandedCard === 'intro' ? `<div class="p-5 pt-0 ${theme.textSecondary} border-t ${theme.bg}">${mod.intro}</div>` : ''}
                </div>

                <!-- Contenido -->
                <div class="${theme.card} rounded-2xl overflow-hidden cursor-pointer" onclick="toggleCard('content')">
                  <div class="p-5 flex justify-between items-center">
                    <h3 class="font-semibold ${theme.text}">📖 Contenido</h3>
                    <svg class="${theme.textSecondary} h-5 w-5 transition-transform duration-300 ${state.expandedCard === 'content' ? 'rotate-180' : ''}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                  ${state.expandedCard === 'content' ? `
                    <div class="p-5 pt-0 ${theme.textSecondary} border-t ${theme.bg}">
                      ${mod.content.split('\n').map(p => `<p class="mb-3">${p}</p>`).join('')}
                    </div>
                  ` : ''}
                </div>

                <!-- Actividad -->
                <div class="${theme.card} rounded-2xl overflow-hidden cursor-pointer" onclick="toggleCard('activity')">
                  <div class="p-5 flex justify-between items-center">
                    <h3 class="font-semibold ${theme.text}">🎮 Actividad</h3>
                    <svg class="${theme.textSecondary} h-5 w-5 transition-transform duration-300 ${state.expandedCard === 'activity' ? 'rotate-180' : ''}" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
                    </svg>
                  </div>
                  ${state.expandedCard === 'activity' ? `
                    <div class="p-5 pt-0 ${theme.bg}">
                      <p class="${theme.textSecondary} mb-4">${mod.activity.question}</p>
                      ${activityHtml}
                    </div>
                  ` : ''}
                </div>
              </div>

              <!-- Botón siguiente -->
              ${mod.nextId ? `
                <div class="p-6">
                  <button onclick="navigate('${mod.nextId}')" class="w-full py-3 bg-gradient-to-r from-cyan-500 to-teal-500 text-white font-medium rounded-2xl shadow-lg hover:shadow-xl transform hover:scale-105 transition-all duration-200">
                    Siguiente módulo →
                  </button>
                </div>
              ` : ''}
            </div>
          </div>
        `;
      }

      // Perfil
      else if (state.currentScreen === 'profile') {
        html = `
          <div class="min-h-screen ${theme.bg} transition-colors duration-300 p-6">
            <button onclick="navigate('home')" class="mb-4 px-4 py-2 rounded-xl ${theme.textSecondary} hover:bg-gray-200 dark:hover:bg-gray-800 transition-colors">
              ← Inicio
            </button>
            <div class="${theme.card} rounded-2xl p-6 max-w-md mx-auto text-center">
              <div class="w-24 h-24 mx-auto mb-4 bg-gradient-to-br from-cyan-400 to-teal-400 rounded-full flex items-center justify-center text-2xl">
                👤
              </div>
              <h2 class="text-2xl font-bold ${theme.text}">Tu perfil</h2>
              <p class="mt-2 ${theme.textSecondary}">Nivel: Pensador Crítico</p>
              <div class="mt-6">
                <div class="${theme.textSecondary} text-sm mb-2">Progreso general</div>
                <div class="progress-bar">
                  <div class="progress-fill bg-gradient-to-r from-cyan-500 to-teal-500" style="width: ${Math.round(totalProgress)}%"></div>
                </div>
                <div class="mt-6">
                  <h3 class="text-sm font-medium ${theme.text} mb-3">Logros</h3>
                  <div class="flex flex-wrap gap-2 justify-center">
                    ${state.badges.length === 0 
                      ? `<span class="${theme.textSecondary} text-sm">Aún no tienes logros</span>`
                      : state.badges.map(b => `
                        <span class="px-3 py-1 bg-gradient-to-r from-yellow-100 to-orange-100 dark:from-yellow-900/30 dark:to-orange-900/30 text-yellow-800 dark:text-yellow-300 rounded-full text-xs font-medium">
                          🏆 ${b}
                        </span>
                      `).join('')
                    }
                  </div>
                </div>
              </div>
            </div>
          </div>
        `;
      }

      document.getElementById('app').innerHTML = html;
    }

    // Navegación
    function navigate(screen) {
      state.currentScreen = screen;
      state.expandedCard = null;
      render();
    }

    // Expandir/collapse tarjeta
    function toggleCard(card) {
      state.expandedCard = state.expandedCard === card ? null : card;
      render();
    }

    // Modo oscuro
    function toggleDarkMode() {
      state.darkMode = !state.darkMode;
      render();
    }

    // Tamaño de fuente
    function toggleFontSize() {
      state.fontSize = state.fontSize === 16 ? 18 : 16;
      render();
    }

    // Verificar respuesta (swipe)
    function checkAnswer(isCorrect) {
      if (isCorrect) {
        alert("✅ ¡Correcto! Esta idea está respaldada por Asimov.");
        updateProgress(state.currentScreen, 100);
      } else {
        alert("⚠️ Revisa el texto. Esta es una opinión sin fundamento.");
      }
      render();
    }

    // Drag & Drop
    let dragStartIndex;
    function dragStart(e, index) {
      dragStartIndex = index;
      e.dataTransfer.effectAllowed = 'move';
    }
    function dragOver(e) {
      e.preventDefault();
    }
    function dragDrop(e, index) {
      e.preventDefault();
      const items = document.querySelectorAll('#drag-container > div');
      const item = items[dragStartIndex];
      items[dragStartIndex].remove();
      if (index > dragStartIndex) index--;
      items[index].parentElement.insertBefore(item, items[index]);
    }
    function checkOrder() {
      const correctOrder = [
        "La ciencia no es una opinión, es una metodología.",
        "El 'like' es el amén. Compartir es la comunión.",
        "Nos creemos libres, pero estamos protocolizados.",
        "La identidad se convierte en mercancía."
      ];
      const items = Array.from(document.querySelectorAll('#drag-container > div span')).map(el => el.textContent);
      if (JSON.stringify(items) === JSON.stringify(correctOrder)) {
        alert("✅ ¡Perfecto! Ordenaste correctamente las ideas clave.");
        updateProgress(state.currentScreen, 100);
      } else {
        alert("💡 Intenta reordenar para mostrar la relación entre Asimov y Han.");
      }
      render();
    }

    // Iniciar
    render();
  </script>

</body>
</html>